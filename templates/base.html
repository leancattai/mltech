<!-- src/templates/base.html -->
<!DOCTYPE html>
<html lang="es">
  {% include "includes/head.html" %}

  <body x-data class="bg-gradient-to-br from-blue-950 via-slate-950 to-black animate-backgroundScroll text-white antialiased scroll-smooth">
    
    {% include "components/navbar.html" %}
    {% include "components/float-icons.html" %}

    <main id="main-content">
      {% block content %}{% endblock %}
    </main>

    {% include "components/footer.html" %}

    <!-- AOS init -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        AOS.init({
          duration: 800,
          easing: 'ease-in-out',
          once: true,
          offset: 60
        });

        // ðŸ” Forzar re-render por si Alpine o HTMX afecta el DOM
        setTimeout(() => {
          AOS.refreshHard();
        }, 100);
      });

      // ðŸ”§ Reactivar animaciones flotantes al cargar
      window.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll('.cascade-icon').forEach(icon => {
          void icon.offsetWidth;
          icon.style.animationPlayState = "running";
        });
      });
    </script>

    <!-- HTMX: Loading indicator -->
    <script>
      document.body.addEventListener('htmx:configRequest', (event) => {
        event.detail.headers['X-Requested-With'] = 'XMLHttpRequest'
      });
    </script>
  </body>
</html>
